(function() { var modal = document.getElementById('cookie-consent-modal'); var acceptAllBtn = modal.querySelector('.cookie-accept-all'); var manageSettingsBtn = modal.querySelector('.cookie-manage-settings'); var savePreferencesBtn = modal.querySelector('.cookie-save-preferences'); var initialButtons = modal.querySelector('.cookie-initial-buttons'); var settingsPanel = modal.querySelector('.cookie-settings'); var necessaryToggle = modal.querySelector('#cookie-necessary'); var analyticalToggle = modal.querySelector('#cookie-analytical'); var marketingToggle = modal.querySelector('#cookie-marketing'); function getCookie(name) { var nameEQ = name + "="; var ca = document.cookie.split(';'); for(var i=0; i < ca.length; i++) { var c = ca[i]; while (c.charAt(0) === ' ') c = c.substring(1, c.length); if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length); } return null; } function setCookie(name, value, days) { var expires = ""; if (days) { var date = new Date(); date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000)); expires = "; expires=" + date.toUTCString(); } document.cookie = name + "=" + (value || "") + expires + "; path=/; SameSite=Lax"; } function hideModal() { modal.style.display = 'none'; } function showModal() { modal.style.display = 'flex'; initialButtons.style.display = 'flex'; settingsPanel.style.display = 'none'; var preferences = getCookie('cookie_consent_preferences'); if (preferences) { try { var parsed = JSON.parse(preferences); analyticalToggle.checked = parsed.analytical || false; marketingToggle.checked = parsed.marketing || false; } catch (e) { analyticalToggle.checked = false; marketingToggle.checked = false; } } else { analyticalToggle.checked = false; marketingToggle.checked = false; } necessaryToggle.checked = true; } function checkCookieConsent() { var consent = getCookie('cookie_consent_preferences'); if (!consent) { showModal(); } else { hideModal(); } } acceptAllBtn.addEventListener('click', function() { var preferences = { necessary: true, analytical: true, marketing: true }; setCookie('cookie_consent_preferences', JSON.stringify(preferences), 365); hideModal(); }); manageSettingsBtn.addEventListener('click', function() { initialButtons.style.display = 'none'; settingsPanel.style.display = 'flex'; }); savePreferencesBtn.addEventListener('click', function() { var preferences = { necessary: necessaryToggle.checked, analytical: analyticalToggle.checked, marketing: marketingToggle.checked }; setCookie('cookie_consent_preferences', JSON.stringify(preferences), 365); hideModal(); }); document.addEventListener('DOMContentLoaded', checkCookieConsent); })();